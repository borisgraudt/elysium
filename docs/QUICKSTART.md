# MeshLink Quick Start Guide

## ‚ö†Ô∏è –í–∞–∂–Ω–æ: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—Ç—ã!

–ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ—Ä—Ç—ã —Å–≤–æ–±–æ–¥–Ω—ã:

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—Ç—ã
lsof -i :8080
lsof -i :8081
```

–ï—Å–ª–∏ –ø–æ—Ä—Ç—ã –∑–∞–Ω—è—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, nginx –Ω–∞ 8080), –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥—Ä—É–≥–∏–µ –ø–æ—Ä—Ç—ã:

```bash
# –í–º–µ—Å—Ç–æ 8080/8081 –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ 8082/8083
cargo run --bin core -- 8082
cargo run --bin core -- 8083 127.0.0.1:8082
```

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø–µ—Ä–≤—É—é –Ω–æ–¥—É

```bash
cargo run --bin core -- 8082
```

–î–æ–∂–¥–∏—Ç–µ—Å—å —Å–æ–æ–±—â–µ–Ω–∏—è:
```
INFO: Listening for incoming connections on 0.0.0.0:8082
```

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Ç–æ—Ä—É—é –Ω–æ–¥—É (–≤ –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)

```bash
cargo run --bin core -- 8083 127.0.0.1:8082
```

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –≤ –ª–æ–≥–∞—Ö:
- –ù–æ–¥–∞ 8082: `INFO: Accepted TCP connection from 127.0.0.1:xxxxx`
- –ù–æ–¥–∞ 8083: `INFO: Connected to peer 127.0.0.1:8082`

## üìä –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Ç–∏

### –ó–∞–ø—É—Å–∫ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏

–í –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ (–ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –Ω–æ–¥):

```bash
cargo run --bin viz
```

**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- `q` –∏–ª–∏ `Esc` - –≤—ã—Ö–æ–¥ –∏–∑ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ ~60 FPS

**–ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:**
- üîó **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è** - –ª–∏–Ω–∏–∏ –º–µ–∂–¥—É –Ω–æ–¥–∞–º–∏ (‚îÄ‚îÇ‚ï≤‚ï±)
- üì§üì• **–°–æ–æ–±—â–µ–Ω–∏—è** - –∞–Ω–∏–º–∞—Ü–∏—è –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ/–ø–æ–ª—É—á–µ–Ω–∏–∏
- üåê **Mesh-—Å–æ–æ–±—â–µ–Ω–∏—è** - —à–∏—Ä–æ–∫–æ–≤–µ—â–∞—Ç–µ–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- **–ê–Ω–∏–º–∞—Ü–∏–∏** - –ø—É–ª—å—Å–∞—Ü–∏—è –Ω–æ–¥ (‚óâ) –∏ —Å–≤—è–∑–µ–π –ø—Ä–∏ —Å–æ–±—ã—Ç–∏—è—Ö

**–≠–ª–µ–º–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞:**
- **Network Topology** - –≥—Ä–∞—Ñ —Å–µ—Ç–∏ —Å –Ω–æ–¥–∞–º–∏ –∏ —Å–≤—è–∑—è–º–∏
- **Status** - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
  - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–æ–¥ –∏ —Å–≤—è–∑–µ–π
  - –ù–æ–º–µ—Ä –∫–∞–¥—Ä–∞ –∞–Ω–∏–º–∞—Ü–∏–∏
  - –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è —Å –∏–∫–æ–Ω–∫–∞–º–∏

**–°–æ–±—ã—Ç–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä—É—é—Ç—Å—è:**
- ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –Ω–æ–¥ (`connected`) - üîó
- ‚úÖ –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –Ω–æ–¥ (`disconnected`) - ‚ùå
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π (`message_sent`) - üì§
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π (`message_received`) - üì•
- ‚úÖ Mesh-—Å–æ–æ–±—â–µ–Ω–∏—è (`mesh_message_received`) - üåê

## üíª CLI –∫–æ–º–∞–Ω–¥—ã

### –ó–∞–ø—É—Å–∫ CLI

CLI –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–π–¥–µ—Ç API –ø–æ—Ä—Ç, –∏–ª–∏ —É–∫–∞–∂–∏—Ç–µ –µ–≥–æ –≤—Ä—É—á–Ω—É—é:

```bash
# API –ø–æ—Ä—Ç = 9000 + P2P –ø–æ—Ä—Ç
# –î–ª—è –Ω–æ–¥—ã –Ω–∞ 8082 ‚Üí API –Ω–∞ 17082
# –î–ª—è –Ω–æ–¥—ã –Ω–∞ 8083 ‚Üí API –Ω–∞ 17083
```

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

**1. –°—Ç–∞—Ç—É—Å –Ω–æ–¥—ã:**
```bash
cargo run --bin cli -- status
```
–í—ã–≤–æ–¥:
```
Node Status:
------------------------------------------------------------
  Node ID: <uuid>
  Connected: 1
  Total peers: 1
```

**2. –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–∏—Ä–æ–≤:**
```bash
cargo run --bin cli -- peers
```
–í—ã–≤–æ–¥:
```
Peers (1):
------------------------------------------------------------
  <peer_id> @ 127.0.0.1:8083 [Connected]
```

**3. –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –ø–∏—Ä—É:**
```bash
# –°–Ω–∞—á–∞–ª–∞ —É–∑–Ω–∞–π—Ç–µ peer_id –∏–∑ –∫–æ–º–∞–Ω–¥—ã peers
cargo run --bin cli -- send <peer_id> "Hello!"
```
–í—ã–≤–æ–¥:
```
‚úì Message sent! ID: <message_id>
```

**4. –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤—Å–µ–º (broadcast):**
```bash
cargo run --bin cli -- broadcast "Hello everyone!"
```
–í—ã–≤–æ–¥:
```
‚úì Message sent! ID: <message_id>
```

### –£–∫–∞–∑–∞–Ω–∏–µ API –ø–æ—Ä—Ç–∞ –≤—Ä—É—á–Ω—É—é

–ï—Å–ª–∏ CLI –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç API –ø–æ—Ä—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

```bash
# –î–ª—è –Ω–æ–¥—ã –Ω–∞ 8082
MESHLINK_API_PORT=17082 cargo run --bin cli -- status

# –î–ª—è –Ω–æ–¥—ã –Ω–∞ 8083
MESHLINK_API_PORT=17083 cargo run --bin cli -- status
```

### –ü—Ä–∏–º–µ—Ä –ø–æ–ª–Ω–æ–≥–æ workflow —Å CLI

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
cargo run --bin cli -- status

# 2. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–ø–∏—Å–æ–∫ –ø–∏—Ä–æ–≤
cargo run --bin cli -- peers

# 3. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å peer_id –∏–∑ –≤—ã–≤–æ–¥–∞ peers

# 4. –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –ø–∏—Ä—É
cargo run --bin cli -- send <peer_id> "Hello from CLI!"

# 5. –û—Ç–ø—Ä–∞–≤–∏—Ç—å broadcast —Å–æ–æ–±—â–µ–Ω–∏–µ
cargo run --bin cli -- broadcast "Hello everyone!"
```

## üöÄ –ü–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã (4 —Ç–µ—Ä–º–∏–Ω–∞–ª–∞)

**–¢–µ—Ä–º–∏–Ω–∞–ª 1 - –ù–æ–¥–∞ 1:**
```bash
cargo run --bin core -- 8082
```

**–¢–µ—Ä–º–∏–Ω–∞–ª 2 - –ù–æ–¥–∞ 2:**
```bash
cargo run --bin core -- 8083 127.0.0.1:8082
```

**–¢–µ—Ä–º–∏–Ω–∞–ª 3 - –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è:**
```bash
cargo run --bin viz
```

**–¢–µ—Ä–º–∏–Ω–∞–ª 4 - CLI:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
cargo run --bin cli -- status

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–∏—Ä–æ–≤
cargo run --bin cli -- peers

# –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
cargo run --bin cli -- broadcast "Hello MeshLink!"
```

–í –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –≤—ã —É–≤–∏–¥–∏—Ç–µ –∞–Ω–∏–º–∞—Ü–∏—é –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏–π! üéâ

## Troubleshooting

### –ü–æ—Ä—Ç –∑–∞–Ω—è—Ç

–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫—É `Address already in use`:
1. –ù–∞–π–¥–∏—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å: `lsof -i :8080`
2. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –µ–≥–æ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥—Ä—É–≥–æ–π –ø–æ—Ä—Ç

### Handshake failed: early eof

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–µ—Ä–≤–∞—è –Ω–æ–¥–∞ –∑–∞–ø—É—â–µ–Ω–∞ –∏ —Å–ª—É—à–∞–µ—Ç
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ—Ä—Ç—ã —Å–≤–æ–±–æ–¥–Ω—ã
3. –ó–∞–ø—É—Å–∫–∞–π—Ç–µ –Ω–æ–¥—ã –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ (—Å–Ω–∞—á–∞–ª–∞ 8082, –ø–æ—Ç–æ–º 8083)

### –ù–æ–¥—ã –Ω–µ –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –æ–±–µ–∏—Ö –Ω–æ–¥ —Å `RUST_LOG=info`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ–±–µ –Ω–æ–¥—ã –≤–∏–¥—è—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ firewall –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
