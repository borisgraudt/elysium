# MeshLink - –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

## –®–∞–≥ 1: –¢–µ—Ä–º–∏–Ω–∞–ª 1 - –ó–∞–ø—É—Å–∫ –ø–µ—Ä–≤–æ–π –Ω–æ–¥—ã

–û—Ç–∫—Ä–æ–π—Ç–µ –ø–µ—Ä–≤—ã–π —Ç–µ—Ä–º–∏–Ω–∞–ª –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
cd /Users/boris/Desktop/meshlink
cargo run --bin core -- 8082
```

**–ß—Ç–æ –≤—ã —É–≤–∏–¥–∏—Ç–µ:**
```
INFO: Created new node with ID: <uuid>
INFO: üöÄ Starting MeshLink P2P Node
INFO: Listening on: 0.0.0.0:8082
INFO: API server listening on 127.0.0.1:17082
INFO: Listening for incoming connections on 0.0.0.0:8082
```

**–í–∞–∂–Ω–æ:** –î–æ–∂–¥–∏—Ç–µ—Å—å —Å–æ–æ–±—â–µ–Ω–∏—è `API server listening on 127.0.0.1:17082` - —ç—Ç–æ –∑–Ω–∞—á–∏—Ç –Ω–æ–¥–∞ –≥–æ—Ç–æ–≤–∞.

**–û—Å—Ç–∞–≤—å—Ç–µ —ç—Ç–æ—Ç —Ç–µ—Ä–º–∏–Ω–∞–ª –æ—Ç–∫—Ä—ã—Ç—ã–º!**

---

## –®–∞–≥ 2: –¢–µ—Ä–º–∏–Ω–∞–ª 2 - –ó–∞–ø—É—Å–∫ –≤—Ç–æ—Ä–æ–π –Ω–æ–¥—ã

–û—Ç–∫—Ä–æ–π—Ç–µ –≤—Ç–æ—Ä–æ–π —Ç–µ—Ä–º–∏–Ω–∞–ª –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
cd /Users/boris/Desktop/meshlink
cargo run --bin core -- 8083 127.0.0.1:8082
```

**–ß—Ç–æ –≤—ã —É–≤–∏–¥–∏—Ç–µ:**
```
INFO: Created new node with ID: <uuid>
INFO: üöÄ Starting MeshLink P2P Node
INFO: Listening on: 0.0.0.0:8083
INFO: API server listening on 127.0.0.1:17083
INFO: Connected to peer 127.0.0.1:8082
```

**–í–∞–∂–Ω–æ:** –î–æ–∂–¥–∏—Ç–µ—Å—å —Å–æ–æ–±—â–µ–Ω–∏—è `Connected to peer 127.0.0.1:8082` - —ç—Ç–æ –∑–Ω–∞—á–∏—Ç –Ω–æ–¥—ã –ø–æ–¥–∫–ª—é—á–∏–ª–∏—Å—å.

**–û—Å—Ç–∞–≤—å—Ç–µ —ç—Ç–æ—Ç —Ç–µ—Ä–º–∏–Ω–∞–ª –æ—Ç–∫—Ä—ã—Ç—ã–º!**

---

## –®–∞–≥ 3: –¢–µ—Ä–º–∏–Ω–∞–ª 3 - –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–û—Ç–∫—Ä–æ–π—Ç–µ —Ç—Ä–µ—Ç–∏–π —Ç–µ—Ä–º–∏–Ω–∞–ª –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
cd /Users/boris/Desktop/meshlink
cargo run --bin viz
```

**–ß—Ç–æ –≤—ã —É–≤–∏–¥–∏—Ç–µ:**
- –ì—Ä–∞—Ñ —Å–µ—Ç–∏ —Å –Ω–æ–¥–∞–º–∏ –∏ —Å–≤—è–∑—è–º–∏
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤–Ω–∏–∑—É —ç–∫—Ä–∞–Ω–∞
- –ê–Ω–∏–º–∞—Ü–∏–∏ –ø—Ä–∏ —Å–æ–±—ã—Ç–∏—è—Ö

**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** –ù–∞–∂–º–∏—Ç–µ `q` –¥–ª—è –≤—ã—Ö–æ–¥–∞

**–û—Å—Ç–∞–≤—å—Ç–µ —ç—Ç–æ—Ç —Ç–µ—Ä–º–∏–Ω–∞–ª –æ—Ç–∫—Ä—ã—Ç—ã–º!**

---

## –®–∞–≥ 4: –¢–µ—Ä–º–∏–Ω–∞–ª 4 - CLI –∫–æ–º–∞–Ω–¥—ã

–û—Ç–∫—Ä–æ–π—Ç–µ —á–µ—Ç–≤–µ—Ä—Ç—ã–π —Ç–µ—Ä–º–∏–Ω–∞–ª –¥–ª—è CLI –∫–æ–º–∞–Ω–¥.

### 4.1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å

```bash
cd /Users/boris/Desktop/meshlink
MESHLINK_API_PORT=17082 cargo run --bin cli -- status
```

**–í—ã–≤–æ–¥:**
```
Node Status:
------------------------------------------------------------
  Node ID: <uuid>
  Connected: 1
  Total peers: 1
```

### 4.2. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–ø–∏—Å–æ–∫ –ø–∏—Ä–æ–≤

```bash
MESHLINK_API_PORT=17082 cargo run --bin cli -- peers
```

**–í—ã–≤–æ–¥:**
```
Peers (1):
------------------------------------------------------------
  <peer_id> @ 127.0.0.1:8083 [Connected]
```

**–í–∞–∂–Ω–æ:** –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `<peer_id>` –∏–∑ –≤—ã–≤–æ–¥–∞ - –æ–Ω –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π.

### 4.3. –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤—Å–µ–º (broadcast)

```bash
MESHLINK_API_PORT=17082 cargo run --bin cli -- broadcast "Hello MeshLink!"
```

**–í—ã–≤–æ–¥:**
```
‚úì Message sent! ID: <message_id>
```

### 4.4. –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –ø–∏—Ä—É

```bash
MESHLINK_API_PORT=17082 cargo run --bin cli -- send f3c6b661-919e-47dd-8ecc-e24324bb6099 "Hello peer!"
```

–ó–∞–º–µ–Ω–∏—Ç–µ `<peer_id>` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π ID –∏–∑ –∫–æ–º–∞–Ω–¥—ã `peers`.

**–í—ã–≤–æ–¥:**
```
‚úì Message sent! ID: <message_id>
```

---

## –ü–æ–ª–Ω—ã–π –ø—Ä–∏–º–µ—Ä –≤—Å–µ—Ö –∫–æ–º–∞–Ω–¥

### –¢–µ—Ä–º–∏–Ω–∞–ª 1:
```bash
cd /Users/boris/Desktop/meshlink
cargo run --bin core -- 8082
```

### –¢–µ—Ä–º–∏–Ω–∞–ª 2:
```bash
cd /Users/boris/Desktop/meshlink
cargo run --bin core -- 8083 127.0.0.1:8082
```

### –¢–µ—Ä–º–∏–Ω–∞–ª 3 (–≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è):
```bash
cd /Users/boris/Desktop/meshlink
cargo run --bin viz
```

### –¢–µ—Ä–º–∏–Ω–∞–ª 4 (CLI):
```bash
cd /Users/boris/Desktop/meshlink

# –°—Ç–∞—Ç—É—Å
MESHLINK_API_PORT=17082 cargo run --bin cli -- status

# –ü–∏—Ä—ã
MESHLINK_API_PORT=17082 cargo run --bin cli -- peers

# Broadcast
MESHLINK_API_PORT=17082 cargo run --bin cli -- broadcast "Test message"

# –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –ø–∏—Ä—É (–∑–∞–º–µ–Ω–∏—Ç–µ <peer_id>)
MESHLINK_API_PORT=17082 cargo run --bin cli -- send <peer_id> "Hello!"
```

---

## Troubleshooting

### CLI –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞:** `Error: Connection refused`

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–æ–¥–∞ –∑–∞–ø—É—â–µ–Ω–∞ –≤ –¢–µ—Ä–º–∏–Ω–∞–ª–µ 1
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤ –ª–æ–≥–∞—Ö –µ—Å—Ç—å `API server listening on 127.0.0.1:17082`
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π API –ø–æ—Ä—Ç: `MESHLINK_API_PORT=17082`

### –ù–æ–¥—ã –Ω–µ –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞:** `Handshake failed: early eof`

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–µ—Ä–≤–∞—è –Ω–æ–¥–∞ –∑–∞–ø—É—â–µ–Ω–∞ –∏ —Å–ª—É—à–∞–µ—Ç
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ—Ä—Ç—ã —Å–≤–æ–±–æ–¥–Ω—ã: `lsof -i :8082`
3. –ó–∞–ø—É—Å–∫–∞–π—Ç–µ –Ω–æ–¥—ã –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ (—Å–Ω–∞—á–∞–ª–∞ 8082, –ø–æ—Ç–æ–º 8083)

### –ü–æ—Ä—Ç –∑–∞–Ω—è—Ç

**–ü—Ä–æ–±–ª–µ–º–∞:** `Address already in use`

**–†–µ—à–µ–Ω–∏–µ:**
1. –ù–∞–π–¥–∏—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å: `lsof -i :8082`
2. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –µ–≥–æ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥—Ä—É–≥–∏–µ –ø–æ—Ä—Ç—ã (8084, 8085)

---

## –ë—ã—Å—Ç—Ä–∞—è —Å–ø—Ä–∞–≤–∫–∞ –ø–æ API –ø–æ—Ä—Ç–∞–º

- –ù–æ–¥–∞ –Ω–∞ –ø–æ—Ä—Ç—É 8082 ‚Üí API –Ω–∞ –ø–æ—Ä—Ç—É 17082
- –ù–æ–¥–∞ –Ω–∞ –ø–æ—Ä—Ç—É 8083 ‚Üí API –Ω–∞ –ø–æ—Ä—Ç—É 17083
- –§–æ—Ä–º—É–ª–∞: API –ø–æ—Ä—Ç = 10000 + node_port

–î–ª—è CLI –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ: `MESHLINK_API_PORT=<api_port>`

