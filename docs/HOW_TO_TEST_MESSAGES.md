# –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π

## –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç

### 1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø–µ—Ä–≤—ã–π —É–∑–µ–ª (–≤ –ø–µ—Ä–≤–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)

```bash
cd /Users/boris/Desktop/meshlink
cargo run --bin core --release -- 8082 127.0.0.1:8083
```

–î–æ–∂–¥–∏—Ç–µ—Å—å —Å–æ–æ–±—â–µ–Ω–∏—è "Heartbeat - Connected: 1/X peers"

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Ç–æ—Ä–æ–π —É–∑–µ–ª (–≤–æ –≤—Ç–æ—Ä–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)

```bash
cd /Users/boris/Desktop/meshlink
cargo run --bin core --release -- 8083 127.0.0.1:8082
```

–î–æ–∂–¥–∏—Ç–µ—Å—å —Å–æ–æ–±—â–µ–Ω–∏—è "Heartbeat - Connected: 1/X peers"

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–ø–∏—Å–æ–∫ –ø–∏—Ä–æ–≤ (–≤ —Ç—Ä–µ—Ç—å–µ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)

```bash
cd /Users/boris/Desktop/meshlink
MESHLINK_API_PORT=17082 cargo run --bin cli -- peers
```

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω–æ–≥–æ –ø–∏—Ä–∞ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `[Connected]` –∏–ª–∏ `[Handshaking]`

### 4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ

–°–Ω–∞—á–∞–ª–∞ –ø–æ–ª—É—á–∏—Ç–µ ID –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω–æ–≥–æ –ø–∏—Ä–∞:

```bash
MESHLINK_API_PORT=17082 cargo run --bin cli -- peers | grep Connected | head -1 | awk '{print $1}'
```

–ó–∞—Ç–µ–º –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (–∑–∞–º–µ–Ω–∏—Ç–µ `PEER_ID` –Ω–∞ ID –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –∫–æ–º–∞–Ω–¥—ã):

```bash
PEER_ID=$(MESHLINK_API_PORT=17082 cargo run --bin cli -- peers 2>&1 | grep -v "warning\|Compiling\|Finished" | grep Connected | head -1 | awk '{print $1}')
MESHLINK_API_PORT=17082 cargo run --bin cli -- send "$PEER_ID" "–ü—Ä–∏–≤–µ—Ç! –≠—Ç–æ —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ"
```

### 5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏

–í –ª–æ–≥–∞—Ö –≤—Ç–æ—Ä–æ–≥–æ —É–∑–ª–∞ (—Ç–µ—Ä–º–∏–Ω–∞–ª 2) –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:

```
üì® Received data message ... from ...: ... bytes
   Content: "–ü—Ä–∏–≤–µ—Ç! –≠—Ç–æ —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ"
```

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ—Å—Ç

–ò–ª–∏ –ø—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –≥–æ—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç:

```bash
cd /Users/boris/Desktop/meshlink
./scripts/test_message_sending.sh
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —É–∑–ª–∞

```bash
# –°—Ç–∞—Ç—É—Å —É–∑–ª–∞ 1
MESHLINK_API_PORT=17082 cargo run --bin cli -- status

# –°—Ç–∞—Ç—É—Å —É–∑–ª–∞ 2
MESHLINK_API_PORT=17083 cargo run --bin cli -- status
```

## –û—Ç–ø—Ä–∞–≤–∫–∞ broadcast —Å–æ–æ–±—â–µ–Ω–∏—è

–ß—Ç–æ–±—ã –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤—Å–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–º –ø–∏—Ä–∞–º:

```bash
MESHLINK_API_PORT=17082 cargo run --bin cli -- broadcast "–°–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –≤—Å–µ—Ö!"
```

## –í–∞–∂–Ω—ã–µ –ø–æ—Ä—Ç—ã

- –£–∑–µ–ª 1: P2P –ø–æ—Ä—Ç 8082, API –ø–æ—Ä—Ç 17082 (9000 + 8082)
- –£–∑–µ–ª 2: P2P –ø–æ—Ä—Ç 8083, API –ø–æ—Ä—Ç 17083 (9000 + 8083)

## –ß—Ç–æ —Å–º–æ—Ç—Ä–µ—Ç—å –≤ –ª–æ–≥–∞—Ö

–ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–µ –≤—ã —É–≤–∏–¥–∏—Ç–µ:

**–í –ª–æ–≥–∞—Ö –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è:**
```
üì§ Sending mesh message ... to 1 peer(s)
   Content: "–≤–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..."
Message ... queued for sending to ...
```

**–í –ª–æ–≥–∞—Ö –ø–æ–ª—É—á–∞—Ç–µ–ª—è:**
```
üì® Received data message ... from ...: ... bytes
   Content: "–≤–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..."
```

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

–ï—Å–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è:

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ–±–∞ —É–∑–ª–∞ –∑–∞–ø—É—â–µ–Ω—ã
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —É–∑–ª—ã –ø–æ–¥–∫–ª—é—á–µ–Ω—ã: `Heartbeat - Connected: 1/X peers`
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π API –ø–æ—Ä—Ç (17082 –¥–ª—è —É–∑–ª–∞ 1, 17083 –¥–ª—è —É–∑–ª–∞ 2)
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–∏—Ä –≤ —Å—Ç–∞—Ç—É—Å–µ `Connected` (–Ω–µ `Handshaking` –∏–ª–∏ `Disconnected`)

